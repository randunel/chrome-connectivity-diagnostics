'use strict';var d,aa=function(a,b,c){return a.call.apply(a.bind,arguments)},ba=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,e);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},f=function(a,b,c){f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aa:ba;return f.apply(null,arguments)};
Function.prototype.bind=Function.prototype.bind||function(a,b){if(1<arguments.length){var c=Array.prototype.slice.call(arguments,1);c.unshift(this,a);return f.apply(null,c)}return f(this,a)};var g={LAUNCH_SOURCE:"Webstore",INIT_APP_HEIGHT:600,INIT_APP_WIDTH:676,MENU_OPTION_ABOUT_APP:!0,MENU_OPTION_TO_RERUN_TESTS:!0,MENU_OPTION_TO_SEND_CHROME_FEEDBACK:!0,MENU_OPTION_TO_SHOW_PASSING_TESTS:!0,RUN_TEST_CAPTIVE_PORTAL_HTTP:!0,RUN_TEST_CHROME_INTERNET_DISCONNECTED:!0,RUN_TEST_CHROMEOS_INTERNET_DISCONNECTED:!0,RUN_TEST_CHROMEOS_SIGNAL_STRENGTH:!0,RUN_TEST_DNS_POISONING:!0,RUN_TEST_HANGOUTS_BLOCKED:!0,RUN_TEST_HTTP_FIREWALL:!0,RUN_TEST_HTTP_LATENCY:!0,RUN_TEST_HTTPS_FIREWALL:!0,RUN_TEST_PING_GATEWAY:!0,
RUN_TEST_RESOLVER_LATENCY:!0,RUN_TEST_RESOLVER_PRESENT:!0,RUN_TEST_WIFI_ENCRYPTION:!1,OPTION_COPY_TEST_RESULTS:!0,OPTION_DEFAULT_SHOW_ALL_RESULTS:!0,OPTION_DEFAULT_SHOW_MORE_INFO:!1,OPTION_LOG_SUPPORT_DETAILS:!0,OPTION_LOG_TEST_BENCHMARKS:!0,OPTION_OUTPUT_LOGS_IN_CONSOLE:!0,OPTION_RECORD_HISTOGRAM_DATA:!0,OPTION_SHOW_TEST_LOGS:!0};var ca=function(){},h=null,l=function(){h||(h=new ca);return h};ca.prototype.log=function(a){console.log(a)};var da=function(){},ea=function(a,b){for(var c=new ArrayBuffer(a.length),e=new Uint8Array(c),k=0,D=a.length;k<D;k++)e[k]=a.charCodeAt(k);b(c)};var fa=function(){var a=new Uint8Array(new ArrayBuffer(20));a[0]=0;a[1]=1;a[2]=0;a[3]=0;a[4]=33;a[5]=18;a[6]=164;a[7]=66;a[8]=121;a[9]=100;a[10]=102;a[11]=54;a[12]=102;a[13]=83;a[14]=66;a[15]=115;a[16]=118;a[17]=119;a[18]=118;a[19]=117;this.b=a.buffer.slice(0,20)};var m=function(a,b,c){this.f=a;this.g=b;this.d=c;this.w=!1;this.b=0;this.j=-1;this.r=null;this.l="";this.e=this.c=this.n=null};m.prototype=new da;
var p=function(a){n(a.d,chrome.i18n.getMessage("telnet_log_tcp_timeout_setting")+1E4);a.b=window.setTimeout(a.Z.bind(a),1E4);chrome.socket.create("tcp",{},function(a){this.j=a.socketId;n(this.d,chrome.i18n.getMessage("telnet_log_socket_created")+this.j+" / "+this.f+" / "+this.g);chrome.socket.connect(this.j,this.f,this.g,this.D.bind(this))}.bind(a))},ga=function(a,b){a.n=b},q=function(a,b){a.c=b},ha=function(a,b){a.e=b},ia=function(a,b){a.l=b};
m.prototype.M=function(a){n(this.d,chrome.i18n.getMessage("telnet_log_parsed_tcp_response")+a);var b=this.n;r(this);b(a)};m.prototype.H=function(a){if(0<a.resultCode){n(this.d,chrome.i18n.getMessage("telnet_log_parsed_response_size")+a.resultCode);var b=this.M.bind(this);a=String.fromCharCode.apply(null,new Uint8Array(a.data));b(a)}else n(this.d,chrome.i18n.getMessage("telnet_log_error_reading_tcp_data")+a.resultCode),null!=this.c&&(b=this.c,r(this),b(a.resultCode))};
m.prototype.G=function(a){n(this.d,chrome.i18n.getMessage("telnet_log_successfully_sent_data")+a.bytesWritten);chrome.socket.read(this.j,this.H.bind(this))};
m.prototype.D=function(a){n(this.d,chrome.i18n.getMessage("telnet_log_connection_established")+this.f+" / "+this.g+" / "+a);if(null!=this.e){var b=this.e;r(this);b(a)}else{b=this.c;switch(a){case -1:n(this.d,chrome.i18n.getMessage("telnet_log_connection_failure")+this.f+" / "+this.g+" / "+a);n(this.d,chrome.i18n.getMessage("telnet_log_connection_failure_unknown"));r(this);b(-1);return;case -118:n(this.d,chrome.i18n.getMessage("telnet_log_connection_failure")+this.f+" / "+this.g+" / "+a);n(this.d,
chrome.i18n.getMessage("telnet_log_connection_failure_timeout"));r(this);b(-118);return;case -102:n(this.d,chrome.i18n.getMessage("telnet_log_connection_failure")+this.f+" / "+this.g+" / "+a);n(this.d,chrome.i18n.getMessage("telnet_log_connection_failure_refused"));r(this);b(-102);return}n(this.d,chrome.i18n.getMessage("telnet_log_connection_established_successfully")+this.f+" / "+this.g);ea(this.l,function(a){this.r=a;n(this.d,chrome.i18n.getMessage("telnet_log_preparing_to_send_data")+this.r.byteLength);
chrome.socket.write(this.j,this.r,this.G.bind(this))}.bind(this))}};var r=function(a){window.clearTimeout(a.b);a.w||(a.c=null,a.e=null,a.n=null,chrome.socket.disconnect(a.j),chrome.socket.destroy(a.j),a.w=!0)};m.prototype.Z=function(){if(null!=this.e){var a=this.e;r(this);a(-118)}else null!=this.c&&(a=this.c,r(this),a(-118))};var s=function(){this.d=this.a=null},t=function(a){a.d(a.a)};s.prototype.q=function(){return!0};var ja={fa:0,ga:1,ha:2,ia:3,ja:4};var u=l(),v=function(a){a="ConnectivityDiagnostics.UA."+a;chrome.metricsPrivate&&(u.log("Histograms - recordUserAction: "+a),chrome.metricsPrivate.recordUserAction(a))},w=function(a,b){var c=Math.round(b),e="ConnectivityDiagnostics."+a;chrome.metricsPrivate&&18E4>c&&(u.log("Histograms - recordMediumTime: "+e+" "+c),chrome.metricsPrivate.recordMediumTime(e,Math.round(c)))},ka=function(a,b,c,e){a={metricName:"ConnectivityDiagnostics."+a,type:"histogram-linear",min:Math.round(0),max:Math.round(c),buckets:Math.round(e)};
chrome.metricsPrivate&&(u.log("Histograms - recordValue: "+a+" "+b),chrome.metricsPrivate.recordValue(a,Math.round(b)))};var la=function(){this.b={};this.b[0]=[];this.b[1]=[];this.b[2]=[]};var x=function(a,b,c){this.j=a;this.l=b;this.c=c;this.n=!1;this.b=0;this.d=-1;this.e=this.g=this.f=null};x.prototype=new da;var na=function(a,b){a.g=b},oa=function(a,b){a.e=b};x.prototype.H=function(a){n(this.c,chrome.i18n.getMessage("udpsocket_log_parsed_udp_response")+a);var b=this.g;pa(this);b(a)};
x.prototype.w=function(a){if(0<a.resultCode){n(this.c,chrome.i18n.getMessage("udpsocket_log_parsed_response_size")+a.resultCode);var b=this.H.bind(this);a=String.fromCharCode.apply(null,new Uint8Array(a.data));b(a)}else n(this.c,chrome.i18n.getMessage("udpsocket_log_error_reading_udp_data")+a.resultCode),null!=this.e&&(b=this.e,pa(this),b(a.resultCode))};x.prototype.D=function(a){n(this.c,chrome.i18n.getMessage("udpsocket_log_successfully_sent_data")+a.bytesWritten);chrome.socket.read(this.d,this.w.bind(this))};
var qa=function(a){n(a.c,chrome.i18n.getMessage("udpsocket_log_preparing_to_send_data")+a.f.byteLength);chrome.socket.write(a.d,a.f,a.D.bind(a))};x.prototype.r=function(){function a(a){this.f=a;qa(this)}null===this.f?ea("",a.bind(this)):qa(this)};
var ra=function(a){n(a.c,chrome.i18n.getMessage("udpsocket_log_udp_timeout_setting")+1E4);a.b=window.setTimeout(a.G.bind(a),1E4);chrome.socket.create("udp",null,function(a){this.d=a.socketId;n(this.c,chrome.i18n.getMessage("udpsocket_log_socket_created")+this.d+" / "+this.j+" / "+this.l);chrome.socket.connect(this.d,this.j,this.l,this.r.bind(this))}.bind(a))},pa=function(a){window.clearTimeout(a.b);a.n||(a.e=null,a.g=null,chrome.socket.disconnect(a.d),chrome.socket.destroy(a.d),a.n=!0)};
x.prototype.G=function(){if(null!=this.e){var a=this.e;pa(this);a(-118)}};var y=100;var sa=function(){},ta=null;sa.prototype.b=function(a){9==a.keyCode&&ua(!0);27==a.keyCode&&document.activeElement&&document.activeElement.blur()};sa.prototype.d=function(){ua(!1)};var ua=function(a){document.body.className=a?"":"no-focus-outline"};var va=function(){this.b=null};va.prototype.o=function(a){var b=document.createElement("div");b.id="page-body-spinner-container";this.b=document.createElement("div");this.b.id="page-body-spinner-loading-message";b.appendChild(this.b);a.appendChild(b);return b};var wa=function(){this.d=this.b=this.c=this.e=!1},xa=null,z=function(){xa||(xa=new wa);return xa},ya=function(a){a.b||(v("PassingTestsShown"),a.b=!0)};var za=function(){};
za.prototype.o=function(a){var b=document.createElement("div");b.id="no-problems-result-container";var c=document.createElement("div");c.id="no-problems-result-contents";b.appendChild(c);var e=document.createElement("div");e.innerHTML='<div class="no-problem-result-inner-contents"><div id="no-problem-result-img" role="alert"></div></div><div class="no-problem-result-inner-contents">'+chrome.i18n.getMessage("result_no_connectivity_problems")+"</div>";c.appendChild(e);a.appendChild(b);return b};var Aa=function(){this.b=null};Aa.prototype.o=function(a){var b=document.createElement("div");b.id="page-body-spinner-container";var c=document.createElement("div");c.id="page-body-spinner-progress-percentile";b.appendChild(c);this.b=document.createElement("div");this.b.id="page-body-spinner-progress-content";c.appendChild(this.b);c=document.createElement("div");c.id="page-body-spinner-loading-message";c.innerHTML=chrome.i18n.getMessage("tests_running_message");b.appendChild(c);a.appendChild(b);return b};
var Ba=function(a,b){if(a.b){var c=0;100==b?c=100:90<b?c=90:75<b?c=75:60<b?c=60:50<b?c=50:40<b?c=40:25<b?c=25:15<b&&(c=15);a.b.innerHTML=c+"%";a.b.className="spinner-progress-"+c}};var Ca=function(){this.d=[];this.c=[];this.b=!0},Da=null,Ea=function(){Da||(Da=new Ca);return Da};Ca.prototype.f=function(){this.b=!this.b;for(var a=0;a<this.d.length;a++)this.d[a](this.b)};Ca.prototype.e=function(){for(var a=0;a<this.c.length;a++)this.c[a]()};var A=function(a){this.d=a;this.j=z();this.e=this.b=this.c=null};
A.prototype.o=function(a){var b=document.createElement("div"),c="inner-logs-container-"+this.d.b,e=document.createElement("div");this.b=document.createElement("a");this.b.innerHTML=chrome.i18n.getMessage("test_result_show_logs");this.b.setAttribute("aria-expanded","false");this.b.setAttribute("aria-controls",c);y++;this.b.tabIndex=y;this.b.className="show-logs-link show-logs-link-a";this.b.addEventListener("click",this.g.bind(this,this.d.b),!1);this.b.addEventListener("keyup",this.g.bind(this,this.d.b),
!1);e.appendChild(this.b);b.appendChild(e);this.c=document.createElement("div");this.c.id=c;this.c.className="element-hidden";this.e=document.createElement("textarea");y++;this.e.tabIndex=y;this.e.className="test-results-logs-textarea";this.e.readOnly=!0;this.e.cols=60;this.e.rows=10;c=chrome.i18n.getMessage("test_result_log_summary")+"\n";c+=chrome.i18n.getMessage("test_result_log_test_name")+this.d.c+"\n";c+=chrome.i18n.getMessage("test_result_log_test_id")+this.d.b+"\n";c+=chrome.i18n.getMessage("test_result_log_test_verdict");
switch(this.d.h){case 0:c+=chrome.i18n.getMessage("test_result_log_verdict_no_problem");break;case 2:c+=chrome.i18n.getMessage("test_result_log_verdict_problem");break;case 1:c+=chrome.i18n.getMessage("test_result_log_verdict_potential_problem")}c+="\n\n";c+=chrome.i18n.getMessage("test_result_log_criteria")+"\n";c+=this.d.d;0<this.d.e.length&&(c+="\n",c+="\n",c+=chrome.i18n.getMessage("test_result_log_support_details")+"\n",c+=this.d.e);for(var c=c+"\n",c=c+"\n",c=c+(chrome.i18n.getMessage("test_result_log_details")+
"\n"),e=this.d.g,k=0;k<e.length;k++)c+=e[k]+"\n";this.e.value=c;this.c.appendChild(this.e);c=document.createElement("div");y++;c.tabIndex=y;c.addEventListener("click",this.f.bind(this,this.d.b),!1);c.addEventListener("keyup",this.f.bind(this,this.d.b),!1);c.innerHTML=chrome.i18n.getMessage("test_result_copy_logs");c.className="show-logs-link show-logs-link-a test-results-logs-textarea";this.c.appendChild(c);b.appendChild(this.c);a.appendChild(b);return b};
A.prototype.g=function(a,b){if(!b||"keyup"!=b.type||13===b.keyCode){var c=this.j;c.c||(v("LogsShown"),c.c=!0);"element-hidden"===this.c.className?(this.b.innerHTML=chrome.i18n.getMessage("test_result_hide_logs"),this.b.setAttribute("aria-expanded","true"),this.c.className="test-result-log-container"):(this.b.innerHTML=chrome.i18n.getMessage("test_result_show_logs"),this.b.setAttribute("aria-expanded","false"),this.c.className="element-hidden");b&&"click"==b.type&&this.b.blur();b.stopPropagation()}};
A.prototype.f=function(a,b){b&&"keyup"==b.type&&13!==b.keyCode||(this.e.select(),document.execCommand("Copy"),b.stopPropagation())};var Fa=function(a){this.e=a;this.g=z();this.b=this.d=null};
Fa.prototype.o=function(a){this.b=document.createElement("div");this.b.className="test-results-contents-frame";this.b.addEventListener("click",this.f.bind(this,this.e.b),!1);this.b.addEventListener("keyup",this.f.bind(this,this.e.b),!1);var b="",c="";switch(this.e.h){case 0:c="test-title test-verdict-pass";b="no-problem-result-title-img";break;case 1:c="test-title test-verdict-warning";b="potential-problem-result-title-img";break;case 2:c="test-title test-verdict-fail",b="problem-result-title-img"}var e=
"test-result-more-info-"+this.e.b;this.d=document.createElement("div");this.d.className=c;y++;this.d.tabIndex=y;this.d.setAttribute("aria-expanded","false");this.d.setAttribute("aria-controls",e);this.d.innerHTML='<div class="test-title-contents-cell"><div class="'+b+'"></div></div>';b=document.createElement("div");b.className="test-title-contents-cell";b.innerHTML=this.e.f;this.d.appendChild(b);this.b.appendChild(this.d);this.c=document.createElement("div");this.c.id=e;this.c.className="element-hidden";
this.b.appendChild(this.c);e=document.createElement("div");e.appendChild(document.createTextNode(this.e.i));e.className="test-subtitle";this.c.appendChild(e);e=document.createElement("div");(new A(this.e)).o(e);this.c.appendChild(e);a.appendChild(this.b);return this.b};
Fa.prototype.f=function(a,b){if(!b||"keyup"!=b.type||13===b.keyCode)if(b&&"click"==b.type&&this.b.blur(),!b||void 0==b.srcElement||"test-results-logs-textarea"!=b.srcElement.className){var c=this.g;c.d||(v("TestResultExpanded"),c.d=!0);"element-hidden"==this.c.className?(this.c.className="element-block",this.b.className="test-results-contents-frame test-results-contents-frame-expanded",this.d.setAttribute("aria-expanded",!0)):(this.c.className="element-hidden",this.b.className="test-results-contents-frame",
this.d.setAttribute("aria-expanded",!1))}};var B=function(a,b){this.d=a;this.b=b};B.prototype.o=function(a){var b=document.createElement("div"),c=document.createElement("div");c.className="test-result-title test-results-contents";c.appendChild(document.createTextNode(this.d));b.appendChild(c);for(var c=document.createElement("div"),e=0;e<this.b.length;e++)(new Fa(this.b[e])).o(c);b.appendChild(c);a.appendChild(b);return b};var Ga=function(a){this.d=a;this.f=z();this.c=Ea();this.b=null};
Ga.prototype.o=function(a){var b=document.createElement("div");b.id="test-results-frame";b.setAttribute("role","alert");var c=document.createElement("div");c.id="test-results-contents";var e=this.d.b[2];0<e.length&&(new B("Failing Tests",e)).o(c);e=this.d.b[1];0<e.length&&(new B("Warning Tests",e)).o(c);e=this.d.b[0];0<e.length&&(this.b=document.createElement("div"),this.b.id="passing-tests-container",this.b.className="element-hidden",(new B("Passing Tests",e)).o(this.b),c.appendChild(this.b));b.appendChild(c);
a.appendChild(b);a=this.e.bind(this);this.c.d.push(a);this.e();return b};Ga.prototype.e=function(){this.c.b?(ya(this.f),null!=this.b&&(this.b.className="element-block")):null!=this.b&&(this.b.className="element-hidden")};var C=function(){return-1!=navigator.userAgent.indexOf(" CrOS ")},E=function(a){for(var b="",c=0;c<a;c++)b+="abcdefghijklmnopqrstuvwxyz".charAt(Math.floor(26*Math.random()));return b},F=function(){return chrome.runtime.getManifest().version},Ha=function(){return void 0!==chrome.dns&&void 0!==chrome.dns.resolve},Ia=function(){var a=navigator.userAgent,b=a.indexOf(" Chrome/");if(-1==b)return-1;a=a.substr(b+8,5);return parseInt(a.substr(0,a.indexOf(".")),10)};var Ja=function(){this.b={}},Ka=null,La=function(a,b,c){this.b=a;this.d=b;this.c=c},Ma=function(){Ka||(Ka=new Ja);return Ka};Ja.prototype.d=function(){var a=Na(this);chrome.runtime.sendMessage("gfdkimpbcpahaombhbimeihdjnejgicl",a,function(){})};
var Na=function(a){var b={requestFeedback:!0,feedbackInfo:{}};b.feedbackInfo.description="";var c={key:"CCD_APP_VERSION_NUMBER",value:F()},e="",k;for(k in a.b){k=parseInt(k,10);var D=a.b[k],e=e+("Test ID: "+D.b+", Test Verdict: "+D.d+", Time Elapsed: "+D.c+"\n")}b.feedbackInfo.systemInformation=[c,{key:"DIAGNOSTICS",value:"Connectivity"},{key:"CCD_APP_TEST_RESULTS",value:e}];a="";for(var ma in g)void 0!=g[ma].toString&&(a+="Name: "+ma+", Value: "+g[ma].toString()+"\n");b.feedbackInfo.systemInformation.push({key:"CCD_APP_FLAGS",
value:a});return b};var G=function(a){this.g=[];this.b=a;this.h=4;this.c=this.e=this.d=this.f=this.i="";this.B=l()};G.prototype.setTitle=function(a){this.f=a};var n=function(a,b){var c;c=(new Date((new Date).getTime())).toString();c+=" - "+b;a.g.push(c);a.B.log(c)};var H=function(){this.a=new G(5);var a=chrome.i18n.getMessage("captiveportalhttptest_name");this.a.c=a;a=chrome.i18n.getMessage("captiveportalhttptest_no_problem_threshold")+"\n";a+=chrome.i18n.getMessage("captiveportalhttptest_potentialproblem_threshold")+"\n";a+=chrome.i18n.getMessage("captiveportalhttptest_problem_threshold")+"\n";this.a.d=a;this.c=0;this.j=[];this.g=[];this.e=this.b=0;this.m=[];for(a=0;3>a;a++)this.m.push(E(8)+"-ccd-testing-v4.metric.gstatic.com")};H.prototype=new s;d=H.prototype;
d.q=function(){return!0};d.p=function(a){this.d=a;this.f()};
d.k=function(){this.a.h=0;this.a.setTitle(chrome.i18n.getMessage("captiveportalhttptest_noproblem_title"));var a=chrome.i18n.getMessage("captiveportalhttptest_noproblem_subtitle");this.a.i=a;if(this.e>=0.2*this.m.length)this.a.h=1,this.a.setTitle(chrome.i18n.getMessage("captiveportalhttptest_potentialproblem_title")),a=chrome.i18n.getMessage("captiveportalhttptest_potentialproblem_subtitle"),this.a.i=a;else for(a=0;a<this.m.length-this.e;a++)if(204!=this.g[a]){this.a.h=2;this.a.setTitle(chrome.i18n.getMessage("captiveportalhttptest_problem_title"));
a=chrome.i18n.getMessage("captiveportalhttptest_problem_subtitle");this.a.i=a;break}};
d.aa=function(a){var b;b=a.indexOf("\n\n");b=-1==b?"-1":a.substr(0,b);var c=-1==a.indexOf("\n")||"HTTP/1.1 "!=a.substring(0,9)?-1:parseInt(a.substring(9,12),10);this.j.push(a.length);this.g.push(c);n(this.a,chrome.i18n.getMessage("captiveportalhttptest_log_response_length")+this.c+" / "+a.length);n(this.a,chrome.i18n.getMessage("captiveportalhttptest_log_response_code")+c);n(this.a,chrome.i18n.getMessage("captiveportalhttptest_log_http_response")+b);Oa(this)};
d.$=function(a){n(this.a,chrome.i18n.getMessage("captiveportalhttptest_log_network_error")+this.c+" / "+a);this.e++;Oa(this)};var Oa=function(a){a.c++;window.clearTimeout(a.b);a.c<a.m.length?a.b=setTimeout(a.f.bind(a),2E3):(a.k(),t(a))};H.prototype.f=function(){var a=this.c,b=new m(this.m[a],80,this.a),c=this.aa.bind(this);b.n=c;c=this.$.bind(this);b.c=c;a="GET /generate_204 HTTP/1.1\nHost: "+this.m[a]+"\nConnection: close\nUser-Agent: "+(navigator.userAgent+" CCD:"+F())+"\n\n";b.l=a;p(b)};var I=function(){this.a=new G(0);var a=chrome.i18n.getMessage("chromeosinternetdisconnectedtest_name");this.a.c=a;a=chrome.i18n.getMessage("chromeosinternetdisconnectedtest_no_problem_threshold")+"\n";a+=chrome.i18n.getMessage("chromeosinternetdisconnectedtest_problem_threshold")+"\n";this.a.d=a;this.b=!0};I.prototype=new s;
I.prototype.k=function(){if(this.b){this.a.h=2;this.a.setTitle(chrome.i18n.getMessage("chromeosinternetdisconnectedtest_problem_title"));var a=chrome.i18n.getMessage("chromeosinternetdisconnectedtest_problem_subtitle")}else this.a.h=0,this.a.setTitle(chrome.i18n.getMessage("chromeosinternetdisconnectedtest_noproblem_title")),a=chrome.i18n.getMessage("chromeosinternetdisconnectedtest_noproblem_subtitle");this.a.i=a};
I.prototype.p=function(a){this.d=a;chrome.networkingPrivate.getVisibleNetworks("All",this.c.bind(this))};I.prototype.q=function(){return C()&&void 0!==chrome.networkingPrivate&&!0};I.prototype.c=function(a){n(this.a,chrome.i18n.getMessage("chromeosinternetdisconnectedtest_log_available_networks")+a.length);if(0==a.length)this.b=!0;else for(var b=0;b<a.length;b++)if("Connected"==a[b].ConnectionState){this.b=!1;break}this.k();t(this)};var J=function(){this.a=new G(10);var a=chrome.i18n.getMessage("chromeossignalstrengthtest_name");this.a.c=a;a=chrome.i18n.getMessage("chromeossignalstrengthtest_no_problem_strength")+30+"\n";a+=chrome.i18n.getMessage("chromeossignalstrengthtest_problem_strength")+30+"\n";this.a.d=a;this.b=-1};J.prototype=new s;
J.prototype.k=function(){if(30>this.b&&-1!=this.b){this.a.h=2;this.a.setTitle(chrome.i18n.getMessage("chromeossignalstrengthtest_problem_title"));var a=chrome.i18n.getMessage("chromeossignalstrengthtest_problem_subtitle");this.a.i=a}else-1!=this.b?(this.a.h=0,this.a.setTitle(chrome.i18n.getMessage("chromeossignalstrengthtest_noproblem_title")),a=chrome.i18n.getMessage("chromeossignalstrengthtest_noproblem_subtitle"),this.a.i=a):this.a.h=4};
J.prototype.p=function(a){this.d=a;chrome.networkingPrivate.getVisibleNetworks("All",this.c.bind(this))};J.prototype.q=function(){return C()&&void 0!==chrome.networkingPrivate&&!0};
J.prototype.c=function(a){for(var b=0;b<a.length;b++)if("Connected"==a[b].ConnectionState&&void 0!=a[b].WiFi){n(this.a,chrome.i18n.getMessage("chromeossignalstrengthtest_log_signal_strength")+a[b].Name+" / "+a[b].WiFi.SignalStrength);this.b=a[b].WiFi.SignalStrength;ka("ChromeOsSignalStrength",this.b,100,10);break}this.k();t(this)};var Pa=function(){this.a=new G(4);var a=chrome.i18n.getMessage("dnspoisoningtest_name");this.a.c=a;a=chrome.i18n.getMessage("dnspoisoningtest_no_problem_threshold")+"\n";a+=chrome.i18n.getMessage("dnspoisoningtest_problem_threshold")+"\n";this.a.d=a;this.g=3;this.c=0;this.e=[];this.j=[];this.b=0;this.f=["ccd-testing-v4.gstatic.com"]};Pa.prototype=new s;var Qa=[-7,-803];d=Pa.prototype;d.q=function(){return Ha()&&!0};d.p=function(a){this.d=a;this.N()};
d.k=function(){var a;t:{for(a=0;a<this.f.length;a++)if("216.239.32.21"!=this.e[a]&&"216.239.34.21"!=this.e[a]&&"216.239.36.21"!=this.e[a]&&"216.239.38.21"!=this.e[a]){a=!0;break t}a=!1}a?(this.a.h=2,this.a.setTitle(chrome.i18n.getMessage("dnspoisoningtest_problem_title")),a=chrome.i18n.getMessage("dnspoisoningtest_problem_subtitle")):(this.a.h=0,this.a.setTitle(chrome.i18n.getMessage("dnspoisoningtest_noproblem_title")),a=chrome.i18n.getMessage("dnspoisoningtest_noproblem_subtitle"));this.a.i=a};
d.ba=function(a){window.clearTimeout(this.b);void 0==a||void 0==a.resultCode?(n(this.a,"#"+this.c+chrome.i18n.getMessage("dnspoisoningtest_noresult_code_returned")),this.a.h=3,t(this)):(-1<Qa.indexOf(a.resultCode)&&0<this.g?(this.c--,this.g--):(this.j.push(a.resultCode),n(this.a,"#"+this.c+chrome.i18n.getMessage("dnspoisoningtest_log_statuscode_returned")+a.resultCode),void 0!=a.address?(this.e.push(a.address),n(this.a,"#"+this.c+chrome.i18n.getMessage("dnspoisoningtest_log_address_returned")+a.address)):
(this.e.push(null),n(this.a,"#"+this.c+chrome.i18n.getMessage("dnspoisoningtest_no_addr_returned")))),this.c++,this.c>=0+this.f.length?(this.k(),t(this)):this.b=setTimeout(this.N.bind(this),1E3))};d.N=function(){var a="";this.c<this.f.length?a=this.f[this.c]:(a=E(25),a+=".com");n(this.a,chrome.i18n.getMessage("dnspoisoningtest_beginning_resolution")+this.c+" / "+a);chrome.dns.resolve(a,this.ba.bind(this))};var K=function(){this.a=new G(14);var a=chrome.i18n.getMessage("endtoendtest_name");this.a.c=a;a=chrome.i18n.getMessage("endtoendtest_no_problem_threshold")+"\n";a+=chrome.i18n.getMessage("endtoendtest_problem_threshold")+"\n";this.a.d=a;this.l=!1;this.c=null;this.g=3;this.e=0;this.j=[];this.b=0;this.f=["https://www.google.com/generate_204","https://mail.google.com/generate_204","https://drive.google.com/generate_204","https://plus.google.com/generate_204"]};K.prototype=new s;var Ra=[204];d=K.prototype;
d.q=function(){return!0};d.p=function(a){this.d=a;L(this)};d.k=function(){var a;if(!(a=this.l))t:{for(a=0;a<this.f.length;a++)if(0>Ra.indexOf(this.j[a])){a=!0;break t}a=!1}a?(this.a.h=2,this.a.setTitle(chrome.i18n.getMessage("endtoendtest_problem_title")),a=chrome.i18n.getMessage("endtoendtest_problem_subtitle")):(this.a.h=0,this.a.setTitle(chrome.i18n.getMessage("endtoendtest_noproblem_title")),a=chrome.i18n.getMessage("endtoendtest_noproblem_subtitle"));this.a.i=a};
d.X=function(){4==this.c.readyState&&(n(this.a,chrome.i18n.getMessage("endtoendtest_success_request")+this.f[this.e]+" /// "+this.c.status),this.j.push(this.c.status),this.e++,L(this))};d.Y=function(){this.g--;L(this)};d.W=function(){this.g--;n(this.a,chrome.i18n.getMessage("endtoendtest_error_in_request")+this.f[this.e]);0>this.g?(this.k(),t(this)):(n(this.a,chrome.i18n.getMessage("endtoendtest_error_in_request_on_final")+this.f[this.e]),this.l=!0,L(this))};
var L=function(a){a.e>=a.f.length||1>a.g?(a.k(),t(a)):a.b=setTimeout(a.n.bind(a),1E3)};K.prototype.n=function(){var a=this.f[this.e];n(this.a,chrome.i18n.getMessage("endtoendtest_beginning_resolution")+this.e+" / "+a);this.c=new XMLHttpRequest;this.c.ontimeout=this.Y.bind(this);this.c.onload=this.X.bind(this);this.c.onerror=this.W.bind(this);this.c.open("GET",a,!0);this.c.send()};var M=function(){this.a=new G(12);var a=chrome.i18n.getMessage("hangoutsblockedtest_name");this.a.c=a;a=chrome.i18n.getMessage("hangoutsblockedtest_no_problem_criteria")+"\n";a+=chrome.i18n.getMessage("hangoutsblockedtest_problem_criteria")+"\n";this.a.d=a;this.a.e="https://support.google.com/a/answer/1279090";this.v=this.s=!1;this.L=[443,1902,1903,1904,1905];this.J=[19302,19303,19304,19305,19306,19307,19308,19309];this.F=this.A=0;this.u=2;this.K=["apis.google.com","clients6.google.com","talkgadget.google.com",
"plus.google.com"];this.I=0};M.prototype=new s;
M.prototype.k=function(){if(this.s&&1===this.u){this.a.setTitle(chrome.i18n.getMessage("hangoutsblockedtest_noproblem_title"));var a=chrome.i18n.getMessage("hangoutsblockedtest_noproblem_subtitle");this.a.i=a;this.a.h=0}else!1===this.s&&this.v&&1===this.u?(this.a.setTitle(chrome.i18n.getMessage("hangoutsblockedtest_potentialproblem_title")),a=chrome.i18n.getMessage("hangoutsblockedtest_potentialproblem_subtitle_udp_media_blocked"),this.a.i=a,this.a.h=1):(!1===this.s&&this.v&&1!==this.u?(this.a.setTitle(chrome.i18n.getMessage("hangoutsblockedtest_potentialproblem_title")),
a=chrome.i18n.getMessage("hangoutsblockedtest_problem_subtitle_tcp_chat_blocked")):this.s&&this.v&&1!==this.u?(this.a.setTitle(chrome.i18n.getMessage("hangoutsblockedtest_potentialproblem_title")),a=chrome.i18n.getMessage("hangoutsblockedtest_problem_subtitle_tcp_chat_blocked")):this.s&&!1===this.v&&1!==this.u?(this.a.setTitle(chrome.i18n.getMessage("hangoutsblockedtest_potentialproblem_title")),a=chrome.i18n.getMessage("hangoutsblockedtest_problem_subtitle_tcp_media_tcp_chat_blocked")):!1===this.s&&
!1===this.v&&1!==this.u?(this.a.setTitle(chrome.i18n.getMessage("hangoutsblockedtest_problem_title")),a=chrome.i18n.getMessage("hangoutsblockedtest_problem_subtitle_udp_media_tcp_media_blocked")):(this.a.setTitle(chrome.i18n.getMessage("hangoutsblockedtest_problem_title")),a=chrome.i18n.getMessage("hangoutsblockedtest_problem_subtitle")),this.a.i=a,this.a.h=2)};M.prototype.q=function(){return!0};M.prototype.p=function(a){this.d=a;N(this)};
var N=function(a){a.A<a.J.length&&!1===a.s?Sa(a):a.F<a.L.length&&!1===a.v?Ta(a):a.I<a.K.length&&2===a.u?Ua(a):(a.k(),a.d(a.a))},Ua=function(a){var b=new m(a.K[a.I],443,a.a);b.l="stub data";var c=function(){this.u=0;n(this.a,chrome.i18n.getMessage("hangoutsblockedtest_log_tcp_connection_failure")+this.K[this.I]);N(this)};q(b,c.bind(a));ha(b,function(a){0===a?(this.I++,this.I===this.K.length&&(this.u=1),N(this)):c.apply(this)}.bind(a));p(b)},Ta=function(a){var b=new m("stun.l.google.com",a.L[a.F],a.a);
q(b,function(){this.v=!1;n(this.a,chrome.i18n.getMessage("hangoutsblockedtest_log_tcp_connection_failure")+this.L[this.F]);this.F++;N(this)}.bind(a));ha(b,function(a){0===a?(this.v=!0,n(this.a,chrome.i18n.getMessage("hangoutsblockedtest_log_tcp_connection_success")+this.L[this.F])):(this.v=!1,this.F++);N(this)}.bind(a));p(b)},Sa=function(a){var b=new x("stun.l.google.com",a.J[a.A],a.a);b.f=(new fa).b;oa(b,function(){this.s=!1;n(this.a,chrome.i18n.getMessage("hangoutsblockedtest_log_udp_connection_failure")+
this.J[this.A]);this.A++;N(this)}.bind(a));na(b,function(a){1<a.length?(this.s=!0,n(this.a,chrome.i18n.getMessage("hangoutsblockedtest_log_udp_connection_success")+this.J[this.A])):(this.s=!1,this.A++);N(this)}.bind(a));ra(b)};var Va=function(){this.a=new G(9);var a=chrome.i18n.getMessage("httplatencytest_name");this.a.c=a;a=chrome.i18n.getMessage("httplatencytest_no_problem_time")+400+"\n";a+=chrome.i18n.getMessage("httplatencytest_potential_problem_time")+400+"-500\n";a+=chrome.i18n.getMessage("httplatencytest_problem_time")+500+"\n";this.a.d=a;this.C=this.b=this.e=this.c=0;this.m=[];for(a=0;3>a;a++)this.m.push(E(8)+"-ccd-testing-v4.metric.gstatic.com")};Va.prototype=new s;d=Va.prototype;d.q=function(){return!0};
d.p=function(a){this.d=a;this.P()};
d.k=function(){var a=this.e/this.m.length,a=Math.round(100*a)/100;w("HTTP_LATENCY",a);n(this.a,chrome.i18n.getMessage("httplatencytest_log_response_time")+this.e);n(this.a,chrome.i18n.getMessage("httplatencytest_log_num_requests")+this.m.length);n(this.a,chrome.i18n.getMessage("httplatencytest_log_average_time")+a);400>a?(this.a.setTitle(chrome.i18n.getMessage("httplatencytest_noproblem_title")),a=chrome.i18n.getMessage("httplatencytest_noproblem_subtitle"),this.a.i=a,this.a.h=0):500>a?(this.a.setTitle(chrome.i18n.getMessage("httplatencytest_potentialproblem_title")),
a=chrome.i18n.getMessage("httplatencytest_potentialproblem_subtitle"),this.a.i=a,this.a.h=1):(this.a.setTitle(chrome.i18n.getMessage("httplatencytest_problem_title")),a=chrome.i18n.getMessage("httplatencytest_problem_subtitle"),this.a.i=a,this.a.h=2)};
d.da=function(){var a=(new Date).getTime(),b=a-this.C;this.e+=b;n(this.a,chrome.i18n.getMessage("httplatencytest_log_response_details")+this.c+" / "+a+" / "+b);this.c++;window.clearTimeout(this.b);this.c<this.m.length?this.b=setTimeout(this.P.bind(this),2E3):(this.k(),t(this))};d.ca=function(a){n(this.a,chrome.i18n.getMessage("httplatencytest_log_network_error")+this.c+" / "+a);this.c++;window.clearTimeout(this.b);this.a.h=3;t(this)};
d.P=function(){var a=this.c,b=new m(this.m[a],80,this.a);ga(b,this.da.bind(this));q(b,this.ca.bind(this));ia(b,"GET /generate_204 HTTP/1.1\nHost: "+this.m[a]+"\nConnection: close\nUser-Agent: "+(navigator.userAgent+" CCD:"+F())+"\n\n");var c=null,e=function(){chrome.socket.disconnect(c);chrome.socket.destroy(c);this.C=(new Date).getTime();p(b)};chrome.socket.create("tcp",{},function(b){c=b.socketId;chrome.socket.connect(c,this.m[a],80,e.bind(this))}.bind(this))};var O=function(){this.a=new G(11);var a=chrome.i18n.getMessage("pinggatewaytest_name");this.a.c=a;a=chrome.i18n.getMessage("pinggatewaytest_no_problem_time")+1500+"\n";a+=chrome.i18n.getMessage("pinggatewaytest_problem_time")+1500+"\n";this.a.d=a;this.b=!0};O.prototype=new s;O.prototype.q=function(){return C()&&31<=Ia()&&void 0!==chrome.diagnostics&&void 0!==chrome.diagnostics.sendPacket};
O.prototype.k=function(a){var b=function(){this.a.setTitle(chrome.i18n.getMessage("pinggatewaytest_problem_title"));var a=chrome.i18n.getMessage("pinggatewaytest_problem_subtitle");this.a.i=a;this.a.h=2},c=function(){this.a.setTitle(chrome.i18n.getMessage("pinggatewaytest_noproblem_title"));var a=chrome.i18n.getMessage("pinggatewaytest_noproblem_subtitle");this.a.i=a;this.a.h=0};this.b?c.call(this):void 0==a||void 0==a.latency?b.call(this):"8.8.8.8"==a.ip?c.call(this):0==a.latency||1500<a.latency?
b.call(this):c.call(this)};O.prototype.p=function(a){this.d=a;Wa(this)};
var Wa=function(a){chrome.diagnostics.sendPacket({ip:"8.8.8.8",ttl:1},function(a){a&&void 0!==a.ip&&void 0!=a.latency?"8.8.8.8"===a.ip?(this.b=!1,n(this.a,chrome.i18n.getMessage("pinggatewaytest_log_same_ip_response")+"8.8.8.8"),this.k(a),t(this)):(this.b=!1,n(this.a,chrome.i18n.getMessage("pinggatewaytest_log_gateway_known")+a.ip),this.c.call(this,a.ip)):(this.b=!0,n(this.a,chrome.i18n.getMessage("pinggatewaytest_log_gateway_unknown")),this.k(a),t(this))}.bind(a))};
O.prototype.c=function(a){chrome.diagnostics.sendPacket({ip:a,ttl:1},this.e.bind(this))};O.prototype.e=function(a){void 0===a||0===a.latency?n(this.a,chrome.i18n.getMessage("pinggatewaytest_log_failure")):n(this.a,chrome.i18n.getMessage("pinggatewaytest_log_latency")+a.latency);this.k(a);t(this)};var Xa=function(){this.a=new G(8);var a=chrome.i18n.getMessage("resolverlatencytest_name");this.a.c=a;a=chrome.i18n.getMessage("resolverlatencytest_no_problem_time")+400+"\n";a+=chrome.i18n.getMessage("resolverlatencytest_potential_problem_time")+400+"-500\n";a+=chrome.i18n.getMessage("resolverlatencytest_problem_time")+500+"\n";this.a.d=a;this.C=this.e=this.c=0;this.m=[];for(a=0;3>a;a++)this.m.push(E(8)+"-ccd-testing-v4.metric.gstatic.com")};Xa.prototype=new s;d=Xa.prototype;
d.q=function(){return Ha()&&!0};d.p=function(a){this.d=a;this.Q()};
d.k=function(){var a=this.e/this.m.length,a=Math.round(100*a)/100;w("RESOLVER_LATENCY",a);n(this.a,chrome.i18n.getMessage("resolverlatencytest_total_resolution_time")+this.e);n(this.a,chrome.i18n.getMessage("resolverlatencytest_total_hosts_resolved")+this.m.length);n(this.a,chrome.i18n.getMessage("resolverlatencytest_average_resolution_time")+a);400>a?(this.a.setTitle(chrome.i18n.getMessage("resolverlatencytest_noproblem_title")),a=chrome.i18n.getMessage("resolverlatencytest_noproblem_subtitle"),
this.a.i=a,this.a.h=0):500>a?(this.a.setTitle(chrome.i18n.getMessage("resolverlatencytest_potentialproblem_title")),a=chrome.i18n.getMessage("resolverlatencytest_potential_problem_subtitle"),this.a.i=a,this.a.h=1):(this.a.setTitle(chrome.i18n.getMessage("resolverlatencytest_problem_title")),a=chrome.i18n.getMessage("resolverlatencytest_problem_subtitle"),this.a.i=a,this.a.h=2)};
d.ea=function(){var a=(new Date).getTime(),b=a-this.C;this.e+=b;n(this.a,chrome.i18n.getMessage("resolverlatencytest_queryresult_received")+this.c+" / "+a+" / "+b+" / "+this.C);this.c++;window.clearTimeout(this.b);this.c<this.m.length?this.b=window.setTimeout(this.Q.bind(this),1E3):(this.k(),t(this))};d.Q=function(){var a=this.m[this.c];this.C=(new Date).getTime();n(this.a,chrome.i18n.getMessage("resolverlatencytest_beginning_resolution")+this.c+" "+a);chrome.dns.resolve(a,this.ea.bind(this))};var P=function(){this.a=new G(3);var a=chrome.i18n.getMessage("resolverpresenttest_name");this.a.c=a;a=chrome.i18n.getMessage("resolverpresenttest_criteria_failure")+"\n";a+=chrome.i18n.getMessage("resolverpresenttest_criteria_success")+"\n";this.a.d=a};P.prototype=new s;P.prototype.q=function(){return Ha()&&!0};P.prototype.p=function(a){this.d=a;n(this.a,chrome.i18n.getMessage("resolverpresenttest_gettinghostname")+"ccd-testing-v4.gstatic.com");chrome.dns.resolve("ccd-testing-v4.gstatic.com",this.b.bind(this))};
P.prototype.k=function(a){if(void 0!=a.resultCode&&0==a.resultCode){this.a.setTitle(chrome.i18n.getMessage("resolverpresenttest_noproblem_title"));var b=chrome.i18n.getMessage("resolverpresenttest_noproblem_subtitle");this.a.i=b;n(this.a,chrome.i18n.getMessage("resolverpresenttest_hostnameresult")+a.address);n(this.a,chrome.i18n.getMessage("resolverpresenttest_log_statuscodesuccess")+a.resultCode);this.a.h=0}else this.a.setTitle(chrome.i18n.getMessage("resolverpresenttest_problem_title")),b=chrome.i18n.getMessage("resolverpresenttest_problem_subtitle"),
this.a.i=b,n(this.a,chrome.i18n.getMessage("resolverpresenttest_log_statuscodefailure")+a.resultCode),this.a.h=2};P.prototype.b=function(a){void 0==a?(n(this.a,chrome.i18n.getMessage("resolverpresenttest_testfailed")),this.a.h=3):(n(this.a,chrome.i18n.getMessage("resolverpresenttest_testcompleted")),this.k(a));t(this)};var Q=function(a,b){this.a=new G(b);var c=chrome.i18n.getMessage("tcpfirewalltest_name");this.a.c=c;c=chrome.i18n.getMessage("tcpfirewalltest_no_problem_threshold")+Math.round(100*(1-0.8))+"%\n";c+=chrome.i18n.getMessage("tcpfirewalltest_problem_threshold")+"100%\n";c+=chrome.i18n.getMessage("tcpfirewalltest_potential_problem_threshold")+Math.round(100*(1-0.8))+"% - 100%\n";this.a.d=c;this.j=3;this.g=[];this.e=a;this.b=this.c=0;this.f="www.google.com mail.google.com drive.google.com accounts.google.com plus.google.com groups.google.com".split(" ");
for(c=0;3>c;c++)this.f.push(E(8)+"-ccd-testing-v4.metric.gstatic.com")};Q.prototype=new s;var Ya=[-7,-118];
Q.prototype.k=function(){for(var a=0,b=0;b<this.f.length;b++)0!==this.g[b]&&(n(this.a,"#"+b+chrome.i18n.getMessage("tcpfirewalltest_log_count_failed_attempt")+this.g[b]),a++);a<(1-0.8)*this.f.length?(this.a.h=0,this.a.setTitle(chrome.i18n.getMessage("tcpfirewalltest_noproblem_title")+this.e),b=chrome.i18n.getMessage("tcpfirewalltest_noproblem_subtitle")+this.e):a>=this.f.length?(this.a.h=2,this.a.setTitle(chrome.i18n.getMessage("tcpfirewalltest_problem_title")+this.e),b=chrome.i18n.getMessage("tcpfirewalltest_problem_subtitle")):
(this.a.h=1,this.a.setTitle(chrome.i18n.getMessage("tcpfirewalltest_potentialproblem_title")+this.e),b=chrome.i18n.getMessage("tcpfirewalltest_potentialproblem_subtitle"));this.a.i=b;n(this.a,chrome.i18n.getMessage("tcpfirewalltest_log_analysis_summary")+this.c+" / "+this.e+" / "+a)};Q.prototype.p=function(a){this.d=a;this.l()};
Q.prototype.n=function(a){window.clearTimeout(this.b);-1<Ya.indexOf(a)&&0<this.j?(this.c--,this.j--):(n(this.a,"# "+this.c+chrome.i18n.getMessage("tcpfirewalltest_log_connection_status_known")+ +a),this.g[this.c]=a);this.c++;this.c<this.f.length?this.b=window.setTimeout(this.l.bind(this),500):(this.k(),t(this))};
Q.prototype.l=function(){var a=this.f[this.c];n(this.a,chrome.i18n.getMessage("tcpfirewalltest_log_connection_about_begun")+this.c+" / "+a+" / "+this.e);var a=new m(a,this.e,this.a),b=this.n.bind(this);a.e=b;a.l="GET / HTTP/1.1";p(a)};var R=function(){this.a=new G(0);var a=chrome.i18n.getMessage("chromeinternetdisconnectedtest_name");this.a.c=a;a=chrome.i18n.getMessage("chromeinternetdisconnectedtest_no_problem_threshold")+100+"\n";a+=chrome.i18n.getMessage("chromeinternetdisconnectedtest_problem_threshold")+100+"\n";this.a.d=a;this.c=0;this.e=[];this.b=0;this.f=[];for(a=0;2>a;a++)this.f.push(E(10)+"-ccd-testing-v4.metric.gstatic.com")};R.prototype=new s;d=R.prototype;d.q=function(){return!0};
d.k=function(){for(var a=0,b=0;b<this.e.length;b++)-106==this.e[b]&&a++;a>=1*this.e.length?(this.a.h=2,this.a.setTitle(chrome.i18n.getMessage("chromeinternetdisconnectedtest_problem_title")),a=chrome.i18n.getMessage("chromeinternetdisconnectedtest_problem_subtitle")):(this.a.h=0,this.a.setTitle(chrome.i18n.getMessage("chromeinternetdisconnectedtest_noproblem_title")),a=chrome.i18n.getMessage("chromeinternetdisconnectedtest_noproblem_subtitle"));this.a.i=a};d.p=function(a){this.d=a;this.O()};
d.V=function(a){window.clearTimeout(this.b);n(this.a,"# "+this.c+chrome.i18n.getMessage("chromeinternetdisconnectedtest_log_connection_status_known")+ +a);this.e[this.c]=a;this.c++;this.c<this.f.length?this.b=window.setTimeout(this.O.bind(this),500):(this.k(),t(this))};d.O=function(){var a=this.f[this.c];n(this.a,chrome.i18n.getMessage("chromeinternetdisconnectedtest_log_connection_beginning")+this.c+" / "+a+" / 80");var a=new m(a,80,this.a),b=this.V.bind(this);a.e=b;a.l="GET / HTTP/1.1";p(a)};var S=function(){};S.prototype=new s;S.prototype.p=function(a){(new Q(80,6)).p(a)};S.prototype.q=function(){return!0};var T=function(){};T.prototype=new s;T.prototype.q=function(){return!0};T.prototype.p=function(a){(new Q(443,7)).p(a)};var U=function(){};U.prototype=new s;U.prototype.q=function(){var a=null;C()?a=new I:a=new R;return a.q()};U.prototype.p=function(a){var b=null;C()?b=new I:b=new R;b.p(a)};var Za=function(a,b){this.d=new la;this.t=0;this.e=a;this.g=b;this.b=!1;this.c=0;this.f=Ma();this.B=l()},$a=[U,J,O,P,H,Pa,Xa,S,T,Va,M,K];
Za.prototype.j=function(a){ka("TestVerdict."+a.b,a.h,Object.keys(ja).length-1,Object.keys(ja).length);var b=(new Date).getTime()-this.c;w("TimeTaken."+a.b,b);this.B.log("Finished running test "+this.t+" in total of "+b+" milliseconds with verdict "+a.h);var c=this.f,e=a.b;void 0===c.b[e]&&(c.b[e]=new La(e,a.h,b));b=this.d;switch(a.h){case 0:b.b[0].push(a);break;case 1:b.b[1].push(a);break;case 2:b.b[2].push(a)}if(0===a.b&&2===a.h||3===a.b&&2===a.h||5===a.b&&2===a.h)this.b=!0,this.e(this.d);this.t++;
this.b||ab(this)};var ab=function(a){a.b=!1;var b=a.t/$a.length,b=Math.round(100*b);a.g(b);b=a.j.bind(a);if(a.t>=$a.length)a.e(a.d);else{var c=$a[a.t];a.B.log("Preparing to launch the "+a.t+" test");var e=function(){this.B.log("Not running test "+this.t+" and moving to next test");this.t++;ab(this)};void 0===c?e.apply(a):(c=new c,c.q()?(a.c=(new Date).getTime(),a.B.log("Launching test "+a.t+" at timestamp "+a.c),c.p(b)):e.apply(a))}};var bb=function(){this.b=document.createElement("div")};bb.prototype.o=function(a){this.b.id="about-container";y++;this.b.tabIndex=y;this.b.className="element-hidden";this.b.innerHTML=chrome.i18n.getMessage("about_app")+"<br>"+chrome.i18n.getMessage("about_version_num")+F();this.b.addEventListener("blur",this.d.bind(this),!0);a.appendChild(this.b);return this.b};bb.prototype.d=function(a){a&&"keyup"==a.type&&13!==a.keyCode||(this.b.className="element-hidden")};var V=function(){this.f=this.e=this.c=this.d=this.g=this.j=null;this.n=!1;this.r=null;this.l=Ea();this.D=z();this.w=Ma()};d=V.prototype;
d.o=function(a){this.e=document.createElement("div");this.e.id="ccd-header";var b=document.createElement("div");b.id="header-title-container";b.appendChild(document.createTextNode(chrome.i18n.getMessage("apptitle")));this.e.appendChild(b);b=document.createElement("div");b.id="header-options-container";this.e.appendChild(b);this.d=document.createElement("button");this.d.id="top-settings-btn";this.d.tabIndex=1;this.d.setAttribute("aria-expanded","false");this.d.setAttribute("aria-controls","settings-container");
this.d.setAttribute("aria-label",chrome.i18n.getMessage("aria_label_settings"));this.d.addEventListener("click",this.M.bind(this),!1);b.appendChild(this.d);this.j=document.createElement("button");this.j.id="top-maximize-btn";this.j.tabIndex=15;this.j.setAttribute("aria-label",chrome.i18n.getMessage("aria_label_maximize"));this.j.addEventListener("click",this.H.bind(this),!1);b.appendChild(this.j);this.g=document.createElement("button");this.g.id="top-close-btn";this.g.tabIndex=16;this.g.setAttribute("aria-label",
chrome.i18n.getMessage("aria_label_close"));this.g.addEventListener("click",function(){window.close()},!1);b.appendChild(this.g);this.b=document.createElement("div");this.b.id="settings-container";this.b.className="element-hidden";this.b.tabIndex=2;this.b.addEventListener("blur",this.G.bind(this),!0);b=document.createElement("div");this.c=document.createElement("a");this.c.id="toggle-passing-tests-link";this.c.tabIndex=3;cb(this);this.c.setAttribute("aria-controls","passing-tests-container");this.c.addEventListener("click",
this.S.bind(this),!1);this.c.addEventListener("keyup",this.S.bind(this),!1);b.appendChild(this.c);this.b.appendChild(b);b=document.createElement("div");this.f=document.createElement("a");this.f.tabIndex=4;this.f.innerHTML=chrome.i18n.getMessage("setting_rerun_tests");this.f.addEventListener("click",this.T.bind(this),!1);this.f.addEventListener("keyup",this.T.bind(this),!1);b.appendChild(this.f);this.b.appendChild(b);if(31<=Ia()){var b=document.createElement("div"),c=document.createElement("a");c.tabIndex=
5;c.innerHTML=chrome.i18n.getMessage("setting_send_feedback");c.addEventListener("click",this.U.bind(this),!1);c.addEventListener("keyup",this.U.bind(this),!1);b.appendChild(c);this.b.appendChild(b)}b=document.createElement("div");c=document.createElement("a");c.tabIndex=6;c.innerHTML=chrome.i18n.getMessage("setting_about");c.addEventListener("click",this.R.bind(this),!1);c.addEventListener("keyup",this.R.bind(this),!1);b.appendChild(c);this.r=new bb;this.r.o(this.e);this.b.appendChild(b);this.e.appendChild(this.b);
a.appendChild(this.e);return this.e};d.T=function(a){a&&"keyup"==a.type&&13!==a.keyCode||this.l.e.apply(this.l)};d.R=function(a){a&&"keyup"==a.type&&13!==a.keyCode||(W(this),a=this.r,a.b.className="about-visible",a.b.focus())};d.U=function(a){a&&"keyup"==a.type&&13!==a.keyCode||(W(this),this.w.d.apply(this.w))};d.S=function(a){a&&"keyup"==a.type&&13!==a.keyCode||(this.l.f.apply(this.l),cb(this),W(this),ya(this.D))};
var cb=function(a){a.l.b?(a.c.innerHTML=chrome.i18n.getMessage("setting_hide_passing_test"),a.c.setAttribute("aria-expanded","true")):(a.c.innerHTML=chrome.i18n.getMessage("setting_show_passing_test"),a.c.setAttribute("aria-expanded","false"))},W=function(a){a.b.className="element-hidden";a.d.className="";a.d.setAttribute("aria-expanded","false");a.n=!1},db=function(a,b){return b==document.body?!1:b==a.b?!0:db(a,b.parentNode)};
V.prototype.G=function(a){a.relatedTarget!=this.d&&(this.n&&null!=a.relatedTarget&&!db(this,a.relatedTarget)?W(this):this.n&&null==a.relatedTarget&&"ccd-app"==document.activeElement.id&&W(this))};V.prototype.M=function(){if(this.n)W(this);else{var a=this.D;a.e||(v("SettingsShown"),a.e=!0);this.b.className="settings-visible";this.d.className="settings-menu-link-expanded";this.d.setAttribute("aria-expanded","true");this.n=!0;this.b.focus()}};
V.prototype.H=function(){var a=chrome.app.window.current();if(C())a.isMaximized()?a.restore():a.maximize();else if(676==a.getBounds().width)a.maximize();else{a.resizeTo(676,600);var a=(screen.width-676)/2,b=(screen.height-600)/2;chrome.app.window.current().moveTo(a,b)}};var X=function(){this.b=this.c=null;this.e=0;this.d=null;this.j=Ea();var a=this.f.bind(this);this.j.c.push(a)};
X.prototype.f=function(){document.getElementById("ccd-app").innerHTML="";this.c=this.b=this.d=null;var a=new V,b=document.getElementById("ccd-app");a.o(b);this.d=document.createElement("div");this.d.id="page-body-container";b.appendChild(this.d);ta||(ta=new sa);a=ta;document.addEventListener("mousedown",a.d.bind(a),!1);document.addEventListener("keydown",a.b.bind(a),!1);a=document.getElementById("ccd-app");this.c=new Aa;this.b=this.c.o(a);Ba(this.c,0);this.e=setTimeout(this.r.bind(this),12E4);try{var c=
new Za(this.n.bind(this),this.l.bind(this));ab(c)}catch(e){console.error(e),c.b=!0,window.clearTimeout(this.e),this.b.parentNode.removeChild(this.b),c=document.getElementById("ccd-app"),this.g=new va,this.b=this.g.o(c),c=this.g,a=chrome.i18n.getMessage("tests_failed_message"),c.b&&(c.b.innerHTML=a)}};X.prototype.n=function(a){window.clearTimeout(this.e);this.b.parentNode.removeChild(this.b);var b=a.b[1].length;0===a.b[2].length&&0===b&&(new za).o(this.d);(new Ga(a)).o(this.d)};
X.prototype.l=function(a){Ba(this.c,a)};X.prototype.r=function(){window.clearTimeout(this.e)};var eb=function(){var a=location.search;if(0<a.length){"?"==a[0]&&(a=a.slice(1));for(var a=a.split("&"),b=0;b<a.length;b++){var c=a[b].slice(0,a[b].indexOf("=")),e=a[b].slice(a[b].indexOf("=")+1);void 0!==g[c]&&(g[c]=isNaN(parseInt(e,10))?"false"==e.toLowerCase()?!1:"true"==e.toLowerCase()?!0:e:parseInt(e,10))}}v("TestSuiteRun");a=F().replace(/\./g,"");a=parseInt(a,10);ka("AppVersion",a,1E3,1);chrome.metricsPrivate&&(u.log("Histograms - recordUserAction: ConnectivityDiagnostics.UA.LaunchSource.Webstore"),
chrome.metricsPrivate.recordUserAction("ConnectivityDiagnostics.UA.LaunchSource.Webstore"));this.b=null};eb.prototype.launch=function(){this.b=new X;this.b.f()};var Y=["ChromeConnectivityDebugger"],Z=this;Y[0]in Z||!Z.execScript||Z.execScript("var "+Y[0]);for(var $;Y.length&&($=Y.shift());)Y.length||void 0===eb?Z[$]?Z=Z[$]:Z=Z[$]={}:Z[$]=eb;
